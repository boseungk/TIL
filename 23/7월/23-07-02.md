## Spring Database

### 체크 예외와 언체크 예외 활용

![예외](https://github.com/boseungk/TIL/assets/95980754/efd79882-41a3-472a-ba09-acbdeea8f621)

여기서 체크와 언체크는 컴파일이 체크하느냐 하지 않느냐를 의미한다. 

Exception의 경우 체크 예외인데, `RuntimeException`의 경우 언체크 예외이다.

그렇다면 언제 체크 예외를 사용하고 언제 언체크(런타임) 예외를 사용하면 좋을까?


### 체크 예외의 문제점

얼핏 보면 언체크 예외보다 체크 예외가 더 안전하고 좋아보이지만 큰 문제점들을 가지고 있다.

예를 들어 아래 그림을 참고해보자.

![체크 예외의 문제](https://github.com/boseungk/TIL/assets/95980754/e31ba6e0-970d-4628-9179-061e37a7e60d)

Repository와 NetworkClient에서 예외가 발생한다고 해도 Service와 Controller는 해당 예외를 처리할 수 있는 로직이 없기 때문에 예외를 던질 수 밖에 없다.

이런 오류는 대부분 복구가 불가능하고 특히나 대부분의 Service나 Controller는 이런 문제를 해결할 수 없기 때문에 일관성 있게 처리하기 위해서 ControllerAdvice를 사용한다.

또 다른 심각한 문제는 예외에 대한 의존관계이다. 체크 예외이기 때문에 Service와 Controller는 의존적인 예외를 선언해야 하지만 다른 기술로 바뀐다면 해당 예외를 전부 다 수정해주어야 한다.

즉 체크 예외 때문에 구현 기술 변경시 파급 효과가 생기게 된다.

### 언체크 예외를 기본적으로 사용하자

위의 문제 때문에 기본적으로 언체크(런타임) 예외를 사용하는 것이 바람직하다.

체크 예외는 비즈니스 로직상 의도적으로 던지는 예외에만 사용하자

반드시 해당 예외를 잡아서 처리해야 하는 문제일 때에만 체크 예외를 사용해야 한다. 예를 들면 계좌 이체 실패 예외, 결제시 포인트 부족 예외, 로그인 ID/PW 불일치 예외 등 

이 경우에도 100% 체크 예외를 만들어야 하는 것은 아니지만 계좌 이체 실패처럼 매우 심각한 문제는 체크 예외로 만들어두면 컴파일러를 통해 놓친 예외를 인지할 수 있다.



## 도커

### 컨테이너 개조

컨테이너를 개조하는 방법은 두 가지 방법이 있다.

첫번째 방법은 앞서 파일 복사와 마운트를 이용한 방법이다.

두번째 방법은 컨테이너에서 리눅스 명령어를 실행하는 방법이다.

리눅스 명령어를 실행하려면 리눅스에 명령을 전달해주는 프로그램인 shell이 필요하다. 일반적으로 bash가 많이 사용된다.

bash를 실행하기 위해서 이자로 `/bin/bash`를 전달하면 된다.

예를 들어 `docker exec -it apa000ex23 /bin/bash`를 입력하면 된다.

`-i`는 표준 입력을 유지하고 컨테이너와 통신할 수 있게 해주고, `-t`는 가상 터미널을 할당하고, 컨테이너 내부의 명령 프롬프트가 터미널처럼 동작해서 명령을 입력하고 결과를 볼 수 있게 해준다.

이때 주의할 점은 bash를 통해 컨테이너 내부를 조작하는 동안에는 도커 명령을 사용할 수 없다는 점이다. 도커 컨테이너는 도커 엔진과는 별개이기 때문이다.

도커 엔진을 통한 명령은 도커 엔진 자체의 시작, 종료, 네트워크, 디스크 설정 등 컨테이너 전체에 대한 관리 작업이다.

반면 컨테이너 내부에서 실행하는 명령은 컨테이너 새로운 소프트웨어를 추가하거나 소프트웨어의 실행, 종료, 설정 변경 등의 작업이다.

작업이 끝나면 `exit`로 컨테이너를 빠져나가 다시 도커 엔진에게 명령할 수 있다.

### 도커 컴포즈

도커 컴포즈는 시스템 구축과 관련된 명령어를 하나의 정의 파일에 기재해 명령어 한번으로 시스템 전체를 실행하고 종료와 폐기까지 한번에 할 수 있도록 도와주는 도구이다.

up 커맨드의 경우 정의 파일에 기재된 내용대로 이미지를 내려 받고 컨테이너를 생성 및 실행한다.

down 커맨드의 경우 컨테이너와 네트워크를 삭제한다. 이때 볼륨과 이미지는 삭제하지 않는다.

### 도커 컴포즈와 Dockerfile 차이

도커 컴포즈는 `docker run` 명령어를 여러 개 모아놓은 것과 같다. **컨테이너와 네트워크와 볼륨처럼 주변 환경을 함께 만들 수 있다.**

반면에 Dockerfile은 **이미지를 만들기 위한 것으로 네트워크나 볼륨은 만들 수 없다.**

참고로 도커 컴포즈와 쿠버네티스 간의 차이점에 대해 궁금할 수 있는데, 쿠버네티스는 컨테이너를 관리하는 도구이지만 도커 컴포즈는 컨테이너를 생성하고 삭제하는 것뿐 관리하는 기능은 없다.
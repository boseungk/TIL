## 동시성 문제

동시성 문제는 지역 변수에서는 발생하지 않는다. 지역 변수는 쓰레드마다 별도의 저장공간을 갖기 때문이다. 반면에 인스턴스 변수(싱글톤)이나 클래스 변수 같은 공용 필드에 접근할 때 문제가 생긴다.

동시성 문제는 값을 읽기만 한다면 발생하지 않는다. 어디선가 값을 수정하기 때문에 발생한다.

이런 문제를 해결하기 위해서 자바에서는 `ThreadLocal` 클래스를 제공한다.

**ThreadLocal 사용법**

* 값 저장: ThreadLocal.set(xxx)
* 값 조회: ThreadLocal.get()
* 값 제거: ThreadLocal.remove()

ThreadLocal을 다 사용하고나서 꼭 `ThreaLocal.remove()`를 호출해서 쓰레드 로컬에 저장된 값을 제거해주어야 한다.

그렇지 않으면 쓰레드 풀을 사용하는 다른 프로그램에서 해당 쓰레드 저장소에 있는 데이터를 그대로 사용해서 문제가 발생할 수 있다!